<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hastane Triaj Sistemi - Sonu√ß</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333;
        }

        header {
            background-color: #fff;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            padding: 1rem 0;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #4d94ff, #80b3ff, #4d94ff);
            background-size: 200% 100%;
            animation: gradient-animation 5s ease infinite;
        }
        
        @keyframes gradient-animation {
            0% {background-position: 0% 50%}
            50% {background-position: 100% 50%}
            100% {background-position: 0% 50%}
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo h1 {
            font-size: 1.8rem;
            color: #333;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: #4d94ff;
            font-size: 1.5em;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 2rem;
        }

        nav a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: all 0.2s;
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }

        nav a:hover {
            color: #fff;
            background-color: #4d94ff;
        }

        .btn-login {
            background-color: #4d94ff;
            color: white !important;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .btn-login:hover {
            background-color: #0066cc;
        }

        .result-page {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 2rem;
            color: #333;
            font-size: 1.8rem;
            position: relative;
            padding-bottom: 1rem;
        }
        
        .page-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, #4d94ff, #80b3ff);
        }

        .result-card {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }
        
        .result-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translateY(-5px);
        }

        .result-header {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .kirmizi-header {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-bottom: 3px solid #f44336;
        }

        .sari-header {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-bottom: 3px solid #ff9800;
        }

        .yesil-header {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-bottom: 3px solid #4caf50;
        }

        .result-title {
            font-size: 1.8rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .result-time {
            background: rgba(255, 255, 255, 0.6);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 500;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-time i {
            color: #555;
        }

        .result-body {
            padding: 2rem;
        }

        .result-summary {
            margin-bottom: 2rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .info-box {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .info-box h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            color: #444;
        }

        .diseases-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
        }

        .disease-item {
            padding: 0.8rem 1rem;
            background-color: #fff;
            border-radius: 6px;
            border-left: 4px solid #4d94ff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .kirmizi-disease {
            border-left-color: #f44336;
        }

        .sari-disease {
            border-left-color: #ff9800;
        }

        .yesil-disease {
            border-left-color: #4caf50;
        }

        .disease-item i {
            font-size: 1rem;
            opacity: 0.7;
        }

        .patient-description {
            font-style: italic;
            padding: 1.2rem;
            background-color: #fff;
            border-radius: 8px;
            border-left: 4px solid #4d94ff;
            margin-bottom: 1rem;
        }

        .urgency-level {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .kirmizi-text {
            color: #d32f2f;
        }

        .sari-text {
            color: #f57c00;
        }

        .yesil-text {
            color: #388e3c;
        }

        .actions {
            margin-top: 2rem;
            display: flex;
            gap: 1rem;
            justify-content: space-between;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .btn i {
            font-size: 1.1em;
        }

        .btn-primary {
            background-color: #4d94ff;
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: #0066cc;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background-color: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
        }

        .btn-secondary:hover {
            background-color: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .expected-wait {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .wait-icon {
            font-size: 2rem;
            color: #4d94ff;
        }

        .wait-details {
            flex: 1;
        }

        .wait-details h4 {
            margin: 0 0 0.3rem 0;
            font-size: 1rem;
        }

        .wait-details p {
            margin: 0;
            color: #666;
        }

        .wait-time {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
        }

        .next-steps {
            margin-top: 2rem;
            background-color: #e8f4fd;
            border-radius: 8px;
            padding: 1.5rem;
        }

        .next-steps h3 {
            margin-top: 0;
            color: #0066cc;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .next-steps ul {
            margin: 0;
            padding-left: 1.5rem;
        }

        .next-steps li {
            margin-bottom: 0.5rem;
            padding-left: 0.5rem;
        }

        .print-button {
            display: flex;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        @media print {
            .no-print {
                display: none;
            }
            
            body {
                background-color: white;
            }
            
            .result-card {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                text-align: center;
            }

            nav ul {
                flex-direction: column;
                gap: 1rem;
                margin-top: 1rem;
            }
            
            .result-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .diseases-list {
                grid-template-columns: 1fr;
            }
            
            .actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header class="no-print">
        <div class="container">
            <div class="logo">
                <h1><i class="fas fa-hospital"></i> Hastane Triaj Sistemi</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="../index.html"><i class="fas fa-home"></i> Ana Sayfa</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="result-page">
        <h1 class="page-title">Triaj Deƒüerlendirme Sonucu</h1>
        
        <div class="result-card">
            <div class="result-header" id="headerArea">
                <h2 class="result-title" id="resultTitle"><i class="fas fa-spinner fa-spin"></i> Triaj Sonucu Y√ºkleniyor...</h2>
                <div class="result-time">
                    <i class="fas fa-calendar-alt"></i> <span id="currentDate">-</span>
                </div>
            </div>

            <div class="result-body">
                <div class="result-summary" id="resultSummary">
                    Triaj deƒüerlendirmeniz y√ºkleniyor...
                </div>

                <div class="info-box">
                    <h3><i class="fas fa-notes-medical"></i> Belirlediƒüiniz ≈ûikayetler</h3>
                    <ul class="diseases-list" id="diseasesList">
                        <li class="disease-item"><i class="fas fa-spinner fa-spin"></i> Y√ºkleniyor...</li>
                    </ul>
                </div>

                <div class="info-box" id="descriptionBox">
                    <h3><i class="fas fa-comment-medical"></i> Ek A√ßƒ±klamalarƒ±nƒ±z</h3>
                    <div class="patient-description" id="patientDescription">
                        Y√ºkleniyor...
                    </div>
                </div>
                
                <div class="urgency-level" id="urgencyLevel">
                    <i class="fas fa-spinner fa-spin"></i> Aciliyet seviyesi hesaplanƒ±yor...
                </div>

                <div class="expected-wait" id="waitTimeContainer">
                    <div class="wait-icon">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <div class="wait-details">
                        <h4>Tahmini Bekleme S√ºresi</h4>
                        <p id="waitTimeDescription">Triaj seviyenize g√∂re tahmini bekleme s√ºresi hesaplanƒ±yor...</p>
                    </div>
                    <div class="wait-time" id="waitTime">--</div>
                </div>

                <div class="next-steps">
                    <h3><i class="fas fa-clipboard-list"></i> Sonraki Adƒ±mlar</h3>
                    <ul id="nextStepsList">
                        <li>Triaj sonucunuza g√∂re sonraki adƒ±mlar y√ºkleniyor...</li>
                    </ul>
                </div>

                <div class="print-button no-print">
                    <button onclick="window.print()" class="btn btn-secondary">
                        <i class="fas fa-print"></i> Yazdƒ±r
                    </button>
                </div>

                <div class="actions no-print">
                    <a href="triage.html" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Geri D√∂n
                    </a>
                    <a href="../index.html" class="btn btn-primary" id="completeButton">
                        <i class="fas fa-home"></i> Ana Sayfaya D√∂n
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // URL'den parametreleri al
            const params = new URLSearchParams(window.location.search);
            const level = params.get('level');
            let diseases = params.get('diseases');
            let description = params.get('description');
            
            if (!level) {
                window.location.href = 'triage.html';
                return;
            }
            
            try {
                diseases = JSON.parse(decodeURIComponent(diseases || '[]'));
            } catch (e) {
                console.error('Hastalƒ±k verisi √ß√∂z√ºmlenemedi:', e);
                diseases = [];
            }
            
            description = decodeURIComponent(description || '');
            
            // Bug√ºn√ºn tarihini g√∂ster
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            document.getElementById('currentDate').textContent = today.toLocaleDateString('tr-TR', options);
            
            // Triaj seviyesi ve ba≈ülƒ±k
            const headerArea = document.getElementById('headerArea');
            const resultTitle = document.getElementById('resultTitle');
            const urgencyLevel = document.getElementById('urgencyLevel');
            
            if (level === 'kirmizi') {
                headerArea.classList.add('kirmizi-header');
                resultTitle.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Kƒ±rmƒ±zƒ± Alan - Acil M√ºdahale';
                urgencyLevel.innerHTML = '<i class="fas fa-circle kirmizi-text"></i> <span class="kirmizi-text">Aciliyet Seviyesi: En Y√ºksek √ñncelik</span>';
                
                document.getElementById('resultSummary').innerHTML = `
                    <strong>Durum: Hayati Tehlike!</strong> Triaj deƒüerlendirmeniz sonucunda en y√ºksek aciliyet seviyesine sahipsiniz. 
                    Durumunuz hemen m√ºdahale gerektirebilir. Acil servis personeli en kƒ±sa s√ºrede sizinle ilgilenecektir.
                `;
                
                document.getElementById('waitTime').textContent = '0-15 dk';
                document.getElementById('waitTimeDescription').textContent = 'Kƒ±rmƒ±zƒ± alan hastalarƒ±na hemen m√ºdahale edilir.';

                document.getElementById('nextStepsList').innerHTML = `
                    <li>Acil servis giri≈üinde saƒülƒ±k personeliyle ileti≈üime ge√ßin.</li>
                    <li>Acil m√ºdahale alanƒ±na hemen alƒ±nacaksƒ±nƒ±z.</li>
                    <li>Gerekli t√ºm tetkik ve tedaviler √∂ncelikli olarak uygulanacaktƒ±r.</li>
                    <li>Hasta yakƒ±nlarƒ±nƒ±z bekleme alanƒ±nda bekleyebilir.</li>
                `;
            } else if (level === 'sari') {
                headerArea.classList.add('sari-header');
                resultTitle.innerHTML = '<i class="fas fa-exclamation-circle"></i> Sarƒ± Alan - √ñncelikli Deƒüerlendirme';
                urgencyLevel.innerHTML = '<i class="fas fa-circle sari-text"></i> <span class="sari-text">Aciliyet Seviyesi: Y√ºksek √ñncelik</span>';
                
                document.getElementById('resultSummary').innerHTML = `
                    <strong>Durum: Acil!</strong> Triaj deƒüerlendirmeniz sonucunda y√ºksek √∂ncelikli bir aciliyet seviyesine sahipsiniz. 
                    Durumunuz yakƒ±n takip ve hƒ±zlƒ± m√ºdahale gerektirir. Acil servis personeli kƒ±sa s√ºrede sizinle ilgilenecektir.
                `;
                
                document.getElementById('waitTime').textContent = '15-30 dk';
                document.getElementById('waitTimeDescription').textContent = 'Sarƒ± alan hastalarƒ± kƒ±sa s√ºrede deƒüerlendirilir.';

                document.getElementById('nextStepsList').innerHTML = `
                    <li>Acil servis kayƒ±t masasƒ±na ba≈üvurun.</li>
                    <li>Sarƒ± alan deƒüerlendirme alanƒ±nda bekleyin.</li>
                    <li>30 dakika i√ßerisinde doktor tarafƒ±ndan deƒüerlendirileceksiniz.</li>
                    <li>≈ûikayetlerinizde artƒ±≈ü olursa hemen g√∂revli personele bildirin.</li>
                `;
            } else {
                headerArea.classList.add('yesil-header');
                resultTitle.innerHTML = '<i class="fas fa-check-circle"></i> Ye≈üil Alan - Normal Deƒüerlendirme';
                urgencyLevel.innerHTML = '<i class="fas fa-circle yesil-text"></i> <span class="yesil-text">Aciliyet Seviyesi: Normal √ñncelik</span>';
                
                document.getElementById('resultSummary').innerHTML = `
                    <strong>Durum: Stabil</strong> Triaj deƒüerlendirmeniz sonucunda durumunuzun acil olmadƒ±ƒüƒ± belirlenmi≈ütir. 
                    ≈ûikayetleriniz deƒüerlendirilecek ancak hayati tehlike arz eden diƒüer hastalar √∂nceliklidir.
                `;
                
                document.getElementById('waitTime').textContent = '1-3 saat';
                document.getElementById('waitTimeDescription').textContent = 'Ye≈üil alan hastalarƒ± sƒ±raya g√∂re deƒüerlendirilir.';

                document.getElementById('nextStepsList').innerHTML = `
                    <li>Acil servis kayƒ±t masasƒ±na ba≈üvurun.</li>
                    <li>Ye≈üil alan bekleme b√∂l√ºm√ºnde sƒ±ranƒ±zƒ±n gelmesini bekleyin.</li>
                    <li>≈ûikayetlerinizde belirgin artƒ±≈ü olursa tekrar triaj masasƒ±na ba≈üvurun.</li>
                    <li>Doktor deƒüerlendirmeniz sƒ±ranƒ±za g√∂re yapƒ±lacaktƒ±r.</li>
                `;
            }
            
            // Hastalƒ±k listesini g√∂ster
            const diseasesList = document.getElementById('diseasesList');
            diseasesList.innerHTML = '';
            
            if (diseases && diseases.length > 0) {
                const triageData = {
                    // Kƒ±rmƒ±zƒ± Alan Hastalƒ±klarƒ±
                    kalp_krizi: { level: 'kirmizi', name: 'Kalp Krizi', icon: 'fa-heartbeat' },
                    beyin_kanamasi: { level: 'kirmizi', name: 'Beyin Kanamasƒ±', icon: 'fa-brain' },
                    solunum_yetersizligi: { level: 'kirmizi', name: 'Solunum Yetersizliƒüi', icon: 'fa-lungs' },
                    inme: { level: 'kirmizi', name: 'ƒ∞nme / Fel√ß', icon: 'fa-brain' },
                    ciddi_kafa_travmasi: { level: 'kirmizi', name: 'Ciddi Kafa Travmasƒ±', icon: 'fa-head-side' },
                    ates_havale: { level: 'kirmizi', name: 'Ate≈üli Havale', icon: 'fa-temperature-high' },
                    elektrik_carpmasƒ±: { level: 'kirmizi', name: 'Elektrik √áarpmasƒ±', icon: 'fa-bolt' },
                    ciddi_zehirlenme: { level: 'kirmizi', name: 'Ciddi Zehirlenme', icon: 'fa-skull-crossbones' },
                    anafilaksi: { level: 'kirmizi', name: 'Anafilaktik ≈ûok', icon: 'fa-allergies' },
                    aktif_kanama: { level: 'kirmizi', name: 'Aktif ≈ûiddetli Kanama', icon: 'fa-tint' },
                    diyabet_komasi: { level: 'kirmizi', name: 'Diyabet Komasƒ±', icon: 'fa-pills' },
                    zehirli_yilan: { level: 'kirmizi', name: 'Zehirli Yƒ±lan/B√∂cek Isƒ±rmasƒ±', icon: 'fa-snake' },
                    
                    // Sarƒ± Alan Hastalƒ±klarƒ±
                    yuksek_ates: { level: 'sari', name: 'Y√ºksek Ate≈ü', icon: 'fa-thermometer-full' },
                    ciddi_travma: { level: 'sari', name: 'Ciddi Travma', icon: 'fa-bone' },
                    bayilma: { level: 'sari', name: 'Bayƒ±lma', icon: 'fa-dizzy' },
                    siddetli_agri: { level: 'sari', name: '≈ûiddetli Aƒürƒ±', icon: 'fa-radiation' },
                    alerjik_reaksiyon: { level: 'sari', name: 'Alerjik Reaksiyon', icon: 'fa-allergies' },
                    astim_atak: { level: 'sari', name: 'Astƒ±m Ataƒüƒ±', icon: 'fa-lungs' },
                    derin_kesik: { level: 'sari', name: 'Derin Kesik', icon: 'fa-cut' },
                    mide_kanamasi: { level: 'sari', name: 'Mide Kanamasƒ±', icon: 'fa-tint' },
                    bobrek_tasi: { level: 'sari', name: 'B√∂brek Ta≈üƒ±', icon: 'fa-kidney' },
                    safra_kesisi: { level: 'sari', name: 'Safra Kesisi Aƒürƒ±sƒ±', icon: 'fa-weight' },
                    apandisit: { level: 'sari', name: 'Apandisit ≈û√ºphesi', icon: 'fa-stethoscope' },
                    yanƒ±k: { level: 'sari', name: 'Orta Derece Yanƒ±k', icon: 'fa-fire' },
                    epilepsi: { level: 'sari', name: 'Epilepsi N√∂beti', icon: 'fa-bolt' },
                    panik_atak: { level: 'sari', name: 'Panik Atak', icon: 'fa-heartbeat' },
                    
                    // Ye≈üil Alan Hastalƒ±klarƒ±
                    hafif_travma: { level: 'yesil', name: 'Hafif Travma', icon: 'fa-band-aid' },
                    grip: { level: 'yesil', name: 'Grip', icon: 'fa-virus' },
                    bas_agrisi: { level: 'yesil', name: 'Ba≈ü Aƒürƒ±sƒ±', icon: 'fa-head-side-cough' },
                    hafif_ates: { level: 'yesil', name: 'Hafif Ate≈ü', icon: 'fa-thermometer-half' },
                    bogaz_agrisi: { level: 'yesil', name: 'Boƒüaz Aƒürƒ±sƒ±', icon: 'fa-head-side-cough' },
                    kulak_agrisi: { level: 'yesil', name: 'Kulak Aƒürƒ±sƒ±', icon: 'fa-ear' },
                    ishal: { level: 'yesil', name: 'ƒ∞shal', icon: 'fa-toilet' },
                    karin_agrisi: { level: 'yesil', name: 'Hafif Karƒ±n Aƒürƒ±sƒ±', icon: 'fa-stomach' },
                    kas_agrisi: { level: 'yesil', name: 'Kas Aƒürƒ±sƒ±', icon: 'fa-walking' },
                    min√∂r_kesik: { level: 'yesil', name: 'K√º√ß√ºk Kesik/Sƒ±yrƒ±k', icon: 'fa-band-aid' },
                    deri_dokuntu: { level: 'yesil', name: 'Deri D√∂k√ºnt√ºs√º', icon: 'fa-allergies' },
                    goz_yanmasi: { level: 'yesil', name: 'G√∂z Yanmasƒ±/Batmasƒ±', icon: 'fa-eye' }
                };
                
                diseases.forEach(disease => {
                    const diseaseInfo = triageData[disease] || { 
                        level: 'yesil', 
                        name: document.querySelector(`label[for="${disease}"]`)?.textContent || disease,
                        icon: 'fa-notes-medical'
                    };
                    
                    const li = document.createElement('li');
                    li.className = `disease-item ${diseaseInfo.level}-disease`;
                    li.innerHTML = `<i class="fas ${diseaseInfo.icon}"></i> ${diseaseInfo.name}`;
                    diseasesList.appendChild(li);
                });
            } else {
                diseasesList.innerHTML = '<p>Hi√ßbir ≈üikayet se√ßilmedi.</p>';
            }
            
            // Ek a√ßƒ±klamayƒ± g√∂ster
            const patientDescriptionElement = document.getElementById('patientDescription');
            if (description && description.trim().length > 0) {
                patientDescriptionElement.textContent = description;
            } else {
                document.getElementById('descriptionBox').style.display = 'none';
            }
            
            // Tamamla butonuna tƒ±klanƒ±nca
            document.getElementById('completeButton').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = '../index.html';
            });
        });
    </script>
</body>
</html> 